<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create a Project</title>
    <link rel="stylesheet" href="index.css">
</head>
<body>
    <header>
        <div class="navBar">
            <ul class="menu">
                <li class="menu_item"><a href="index.html">Students</a></li>
                <li class="menu_item"><a href="projects.html">Projects</a></li>
                <li class="menu_button">
                    <div class="profile-menu">
                        <button class="users"><img src="./Asset/person.png" alt="person"></button>
                        <ul class="submenu">
                            <li class="profile"><a href="profile.html">Profile</a></li>
                            <li class="projects"><a href="my_projects.html">Projects</a></li>
                            <li class="group"><a href="group.html">Group</a></li>
                            <li class="group"><a href="logout.html">Logout</a></li>
                        </ul>
                    </div>
                </li>
            </ul>
        </div>
    </header>
    <main>
        <div class="form-container">
            <form id="createProjectForm">
                <label for="project-name">Project Name:</label>
                <input type="text" id="project-name" name="project-name" required>

                <label for="starter">Starter:</label>
                <input type="text" id="starter" name="starter" required>

                <label>Members (Up to 3):</label>
                <input type="text" class="member-input" placeholder="Member 1">
                <input type="text" class="member-input" placeholder="Member 2">
                <input type="text" class="member-input" placeholder="Member 3">

                <label for="project-detail">Project Detail:</label>
                <textarea id="project-detail" name="project-detail" rows="4" required></textarea>

                <button type="button" id="submitProjectButton">Submit</button>
            </form>
        </div>
    </main>
    <footer></footer>

    <script>
        document.getElementById("submitProjectButton").addEventListener("click", function () {
            const projectName = document.getElementById("project-name").value;
            const starter = document.getElementById("starter").value;
            const members = Array.from(document.querySelectorAll(".member-input")).map(input => input.value).filter(Boolean);
            const projectDetail = document.getElementById("project-detail").value;

            const totalMembers = members.length + 1; // starter is included
            const maxMembers = 4;

            const project = {
                name: projectName,
                starter: starter,
                members: members,
                detail: projectDetail,
                progress: `${totalMembers} / ${maxMembers}`,
            };

            console.log("Project Data:", project);

            // Save to Local Storage
            const existingProjects = JSON.parse(localStorage.getItem("projects")) || [];
            existingProjects.push(project);
            localStorage.setItem("projects", JSON.stringify(existingProjects));

            window.location.href = "projects.html";
        });
    </script>
    <script src="index.js" defer></script>
    <script src="projects.js" defer></script>
</body>
</html>